<div class="container">
  <a [routerLink]="['/profile']" class="close-button" aria-label="Close">
    <span>&times;</span>
  </a>
  <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="form-horizontal">
    <h2>Update Profile</h2>
    <div class="form-group">
      <label for="name" class="control-label">First Name</label>
      <input type="text" id="name" placeholder="First Name" class="form-control" formControlName="name">
      <div *ngIf="registrationForm.get('name')?.invalid && (registrationForm.get('name')?.dirty || registrationForm.get('name')?.touched)" class="text-danger">
        <div *ngIf="registrationForm.get('name')?.errors?.['required']">First Name is required.</div>
        <div *ngIf="registrationForm.get('name')?.errors?.['minlength']">First Name must be at least 2 characters long.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="surName" class="control-label">Last Name</label>
      <input type="text" id="surName" placeholder="Last Name" class="form-control" formControlName="surName">
      <div *ngIf="registrationForm.get('surName')?.invalid && (registrationForm.get('surName')?.dirty || registrationForm.get('surName')?.touched)" class="text-danger">
        <div *ngIf="registrationForm.get('surName')?.errors?.['required']">Last Name is required.</div>
        <div *ngIf="registrationForm.get('surName')?.errors?.['minlength']">Last Name must be at least 2 characters long.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="address" class="control-label">Address</label>
      <input type="text" id="address" placeholder="Address" class="form-control" formControlName="address">
      <div *ngIf="registrationForm.get('address')?.invalid && (registrationForm.get('address')?.dirty || registrationForm.get('address')?.touched)" class="text-danger">
        <div *ngIf="registrationForm.get('address')?.errors?.['required']">Address is required.</div>
        <div *ngIf="registrationForm.get('address')?.errors?.['minlength']">Address must be at least 5 characters long.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="phoneNumber" class="control-label">Phone number</label>
      <input type="text" id="phoneNumber" placeholder="Phone number" class="form-control" formControlName="phoneNumber">
      <div *ngIf="registrationForm.get('phoneNumber')?.invalid && (registrationForm.get('phoneNumber')?.dirty || registrationForm.get('phoneNumber')?.touched)" class="text-danger">
        <div *ngIf="registrationForm.get('phoneNumber')?.errors?.['required']">Phone number is required.</div>
        <div *ngIf="registrationForm.get('phoneNumber')?.errors?.['pattern']">Phone number must be 10 digits long.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="birthday" class="control-label">Date of Birth</label>
      <input type="date" id="birthday" class="form-control" formControlName="birthday">
      <div *ngIf="registrationForm.get('birthday')?.invalid && (registrationForm.get('birthday')?.dirty || registrationForm.get('birthday')?.touched)" class="text-danger">
        <div *ngIf="registrationForm.get('birthday')?.errors?.['required']">Date of Birth is required.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="city" class="control-label">City</label>
      <input type="text" id="city" placeholder="City" class="form-control" formControlName="city">
      <div *ngIf="registrationForm.get('city')?.invalid && (registrationForm.get('city')?.dirty || registrationForm.get('city')?.touched)" class="text-danger">
        <div *ngIf="registrationForm.get('city')?.errors?.['required']">City is required.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="email" class="control-label">Email</label>
      <input type="email" id="email" placeholder="Email" class="form-control" formControlName="email" readonly>
      <div *ngIf="registrationForm.get('email')?.invalid && (registrationForm.get('email')?.dirty || registrationForm.get('email')?.touched)" class="text-danger">
        <div *ngIf="registrationForm.get('email')?.errors?.['required']">Email is required.</div>
        <div *ngIf="registrationForm.get('email')?.errors?.['email']">Invalid email format.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="currentPassword" class="control-label">Current Password</label>
      <input type="password" id="currentPassword" placeholder="Current Password" class="form-control" formControlName="currentPassword" (blur)="checkCurrentPassword()">
      <div *ngIf="currentPasswordInvalid" class="text-danger">
        Current password is incorrect.
      </div>
    </div>
    
    <div class="form-group">
      <label for="password" class="control-label">New Password</label>
      <input type="password" id="password" placeholder="New Password" class="form-control" formControlName="password" [disabled]="currentPasswordInvalid" (input)="onPasswordChange()">
      <div *ngIf="registrationForm.get('password')?.invalid && (registrationForm.get('password')?.dirty || registrationForm.get('password')?.touched)" class="text-danger">
        <div *ngIf="registrationForm.get('password')?.errors?.['required']">New Password is required.</div>
      </div>
    </div>
    
    <div class="form-group">
      <label for="confirmPassword" class="control-label">Confirm New Password</label>
      <input type="password" id="confirmPassword" placeholder="Confirm New Password" class="form-control" formControlName="confirmPassword" [disabled]="currentPasswordInvalid">
      <div *ngIf="registrationForm.get('confirmPassword')?.invalid && (registrationForm.get('confirmPassword')?.dirty || registrationForm.get('confirmPassword')?.touched)" class="text-danger">
        <div *ngIf="registrationForm.get('confirmPassword')?.errors?.['required']">Confirm New Password is required.</div>
        <div *ngIf="registrationForm.get('confirmPassword')?.errors?.['mismatch']">Passwords do not match.</div>
      </div>
    </div>
    
    <div class="text-center">
      <button type="submit" class="btn btn-primary" [disabled]="registrationForm.invalid || currentPasswordInvalid">Update</button>
    </div>
    
  </form>
</div>

